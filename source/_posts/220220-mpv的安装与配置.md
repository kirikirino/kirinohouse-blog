---
title: "mpv 的安装与配置"
date: 2022-02-20
lastmod: 2022-03-28
slug: kr0003

description: 记录 mpv 的安装与配置过程。
images: [https://s2.loli.net/2022/04/07/YqGwWTBpjoRlCDM.png]
featuredImagePreview: "https://s2.loli.net/2022/04/07/YqGwWTBpjoRlCDM.png"

categories: 
  - 技术分享
series:
series_weight: 

password:

authors: [Kirino]
outdatedArticleReminder: true
draft: false

---

<!--more-->

{{< admonition type=example title="文章摘要" open=true >}}
记录 mpv 的安装与配置过程。
{{< /admonition >}}

![mpv导图](https://s2.loli.net/2022/03/28/QcfVkIJF1MSKlWi.png)

## 1.软件安装

> 参考资料：[跨平台播放器 mpv 配置入门](https://vcb-s.com/archives/7594)

 **1.1 Windows 平台**

1. 从 [这里](https://sourceforge.net/projects/mpv-player-windows/files/) 下载最新 git 版安装文件，从 [这里](https://github.com/rossy/mpv-install/archive/master.zip) 下载 Windows 安装脚本。
2. 将安装文件压缩包内所有文件解压到你想要的位置（例如 `D:\mpv`）。
3. 将 Windows 安装脚本解压到与安装文件相同的目录下（例如 `D:\mpv`）。
4. 以管理员权限运行 `mpv-install.bat` 。
5. 进入系统设置，将 `mpv` 设为 默认视频播放器。

 **1.2 macOS 平台**

1. 从 [这里](https://laboratory.stolendata.net/~djinn/mpv_osx/) 下载最新版软件压缩包并解压。
2. 将 `mpv.app` 拖入 应用程序 文件夹。
3. 打开 `mpv.app` 会被安全设置阻止。
4. 在 `系统偏好设置 - 安全性与隐私` 窗口中解除阻止。
5. 找到一个视频文件右键单击 `显示简介 - 打开方式 - mpv - 全部更改` 。
6. 重复上一步骤完成常用视频文件关联。
   - 常用视频格式：3GP、ASF、AVI、FLV、M4V、MKV、MOV、MP4、MPEG、MPG、MPG2、MPG4、RMVB、WMV、MTS。

## 2.配置文件

> 参考资料：[mpv_doc-CN](https://github.com/hooke007/mpv_doc-CN)

### 2.1 创建配置文件

**2.1.1 Windows 平台**

1. 打开 `mpv` 的安装目录。
2. 新建文件夹 `portable_config`（例如 `D:\mpv\portable_config`）。
3. 在 `portable_config` 文件夹中创建配置文件 `mpv.conf` 。
4. 打开 `mpv.conf` ，更改其内容。

**2.2.2 macOS 平台**

1. 打开 `访达` 。
2. 在顶栏菜单中 `前往 - 前往文件夹` 。
3. 输入 `~/.mpv` 进入 mpv 文件夹。
4. 打开 macOS 自带的 `文本编辑` 。
5. 新建一个文档，`格式 - 制作纯文本` 。
6. 将文档 `存储` 到 `mpv` 文件夹，文件名为 `mpv.conf` 。
7. 打开 `mpv.conf` ，更改其内容。

### 2.2 修改配置文件

&emsp;&emsp;配置文件的内容修改根据自己的实际需求进行调整，这里可以看一下我列出的参考资料，实现了对官方文档的汉化。不懂的参数尽量不要调。

&emsp;&emsp;下面是我自己的配置文件，我尽可能的将每一个设置项目通过注释进行了说明。

{{< admonition type=tip title="代码分享" open=true >}}

配置文件代码：[kirikirino/mpv.conf/mpv.conf](https://github.com/kirikirino/mpv.conf/blob/main/mpv.conf)
{{< /admonition >}}

## 3.按键绑定

### 3.1 创建按键绑定文件

**3.1.1 Windows 平台**

1. 在 `portable_config` 文件夹中创建快捷键文件 `input.conf` 。
2. 打开 `input.conf` ，更改其内容。

**3.1.2 macOS 平台**

1. 打开 macOS 自带的 `文本编辑` 。
2. 新建一个文档，`格式 - 制作纯文本` 。
3. 将文档 存储 到 `.mpv` 文件夹，文件名为 `input.conf` 。
4. 打开 `input.conf` ，更改其内容。

### 3.2 修改按键绑定文件

&emsp;&emsp;按键绑定根据自己实际需求进行修改，即使不进行设置，官方也有一套自己的默认方案。mpv 支持同一功能绑定多个按键组合，非常便捷。

&emsp;&emsp;下面我贴出官方默认文件与我自己的方案，因为很多默认的按键绑定我用不上，所以在配置文件中直接全部屏蔽再重新绑定了。

{{< admonition type=tip title="代码分享" open=true >}}

官方默认按键绑定：[mpv-player/mpv/blob/master/etc/input.conf](https://github.com/mpv-player/mpv/blob/master/etc/input.conf)

按键绑定文件代码：[kirikirino/mpv.conf/input.conf](https://github.com/kirikirino/mpv.conf/blob/main/input.conf)
{{< /admonition >}}

## 4.脚本应用

> 参考文章：[hooke007/MPV_lazy/script-opts](https://hooke007.github.io/mpv-lazy/mpv.html#31%E5%86%85%E7%BD%AE%E8%84%9A%E6%9C%AC)

### 4.1 创建脚本文件夹

**4.1.1 Windows 平台**

1. 打开 `mpv` 的安装目录。
2. 新建文件夹 `portable_config`（例如 `D:\mpv\portable_config`）。
3. 在 `portable_config` 文件夹中新建文件夹 `scripts` 。
4. 在 `scripts` 文件夹中放置 `xxx.lua` 的脚本文件。
5. 在 `portable_config` 文件夹中新建文件夹 `script-opts` 。
6. 在 `script-opts` 文件夹中放置 `xxxx.conf` 的脚本配置文件。

**4.1.2 macOS 平台**

1. 打开 `访达` 。
2. 在顶栏菜单中 `前往 - 前往文件夹` 。
3. 输入 `~/.mpv` 进入 `mpv` 文件夹。
4. 新建文件夹 `scripts` 。
5. 在 `scripts` 文件夹中放置 `xxx.lua` 的脚本文件。
6. 新建文件夹 `script-opts` 。
7. 在 `script-opts` 文件夹中放置 `xxxx.conf` 的脚本配置文件。

### 4.2 console.conf

> mpv集成的 `console.lua` 脚本带来了控制台功能，一般用于便于快速查错。
>
> 官方手册定位: https://mpv.io/manual/master/#console
>
> 快捷键 `·` 唤起控制台查看控制台信息，按 `Esc` 关闭控制台。

&emsp;&emsp;在 `script-opts` 文件夹中创建 `console.conf` 文件，并写入以下内容。

```yaml
###此配置不支持参数后注释，须另起一行

#scale=1
##字体缩放率。如果当mpv.conf中已设定vo随hidpi缩放时，此参数无效

#font=
##指定控制台的字体

font_size=22
#字体大小默认16。最终大小将与缩放率相乘
```

### 4.3 stats.conf

> mpv集成的 `stats.lua` 脚本带来了类 Mediainfo 功能，可用于查看各项状态。
>
> 官方手册定位: https://mpv.io/manual/master/#stats

&emsp;&emsp;在 `script-opts` 文件夹中创建 `stats.conf` 文件，并写入以下内容。

```yaml
###此配置不支持参数后注释，须另起一行

duration=3
##短暂显示的持续时间（秒）
redraw_delay=0.5
##数据刷新间隔（秒），设为0会有bug
persistent_overlay=yes
##禁止其它OSD文本覆盖stats信息

#font=Sans
##显示字体
font_size=9
font_color=FFFFFF
border_size=0.4
border_color=1C1C1C
alpha=0
##<0-99> 字体透明度，似乎是百分比
```

### 4.4 osc.conf

&emsp;&emsp;mpv 的 osc 可以自由定制，但是我并不懂代码，所以选择直接使用网友分享出来的方案。

&emsp;&emsp;在 `scripts` 文件夹中创建 `osc.lua` 文件，并写入以下链接中的内容。

{{< admonition type=tip title="网页引用" open=true >}}
osc 自定方案：[MPV-EASY-Player](https://github.com/422658476/MPV-EASY-Player/blob/master/mpv-easy-data/osc-style/osc-iina-box-knob-or-bar-15.lua)
{{< /admonition >}}

&emsp;&emsp;在 `script-opts` 文件夹中创建 `osc.conf` 文件，并写入以下内容。

```yaml
[osc-conf]
layout=box
seekbarstyle=bar
boxalpha=15
```

